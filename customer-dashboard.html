<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard - Tezzon Charge</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="products.css">
    <style>
        .dashboard-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: none;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .stats-card {
            background: linear-gradient(135deg, #0056b3 0%, #007bff 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }
        
        .order-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending { background: #fff3cd; color: #856404; }
        .status-processing { background: #cce5ff; color: #004085; }
        .status-shipped { background: #d1ecf1; color: #0c5460; }
        .status-delivered { background: #d4edda; color: #155724; }
        
        .tracking-timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .tracking-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e9ecef;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 25px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -22px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #007bff;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #e9ecef;
        }
        
        .timeline-item.completed::before {
            background: #28a745;
        }
        
        .timeline-item.current::before {
            background: #ffc107;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }
        
        .nav-pills .nav-link {
            border-radius: 25px;
            margin: 0 5px;
            padding: 10px 20px;
        }
        
        .nav-pills .nav-link.active {
            background: linear-gradient(135deg, #0056b3 0%, #007bff 100%);
        }
        
        .order-card {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .order-card:hover {
            border-color: #007bff;
            box-shadow: 0 5px 15px rgba(0,123,255,0.1);
        }
    </style>
</head>
<body style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); min-height: 100vh;">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #0056b3 0%, #007bff 100%);">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="fas fa-bolt me-2"></i>Tezzon Charge
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="billing.html">Cart</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="customer-dashboard.html">Dashboard</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <!-- Welcome Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="dashboard-card p-4">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h2 class="text-primary mb-2">
                                <i class="fas fa-user-circle me-2"></i>Welcome back!
                            </h2>
                            <p class="text-muted mb-0">Manage your orders, track deliveries, and update your profile</p>
                        </div>
                        <div class="col-md-4 text-end">
                            <button class="btn btn-outline-primary" onclick="editProfile()">
                                <i class="fas fa-edit me-2"></i>Edit Profile
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="stats-card">
                    <i class="fas fa-shopping-bag fa-2x mb-3"></i>
                    <h3 id="totalOrders">0</h3>
                    <p class="mb-0">Total Orders</p>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stats-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                    <i class="fas fa-check-circle fa-2x mb-3"></i>
                    <h3 id="completedOrders">0</h3>
                    <p class="mb-0">Completed</p>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stats-card" style="background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);">
                    <i class="fas fa-truck fa-2x mb-3"></i>
                    <h3 id="activeOrders">0</h3>
                    <p class="mb-0">In Progress</p>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stats-card" style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);">
                    <i class="fas fa-star fa-2x mb-3"></i>
                    <h3 id="totalSpent">â‚¹0</h3>
                    <p class="mb-0">Total Spent</p>
                </div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <div class="row">
            <div class="col-12">
                <div class="dashboard-card">
                    <div class="card-header bg-transparent border-0 p-4">
                        <ul class="nav nav-pills" id="dashboardTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="orders-tab" data-bs-toggle="pill" data-bs-target="#orders" type="button" role="tab">
                                    <i class="fas fa-list me-2"></i>My Orders
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="tracking-tab" data-bs-toggle="pill" data-bs-target="#tracking" type="button" role="tab">
                                    <i class="fas fa-truck me-2"></i>Track Order
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="profile-tab" data-bs-toggle="pill" data-bs-target="#profile" type="button" role="tab">
                                    <i class="fas fa-user me-2"></i>Profile
                                </button>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="card-body p-4">
                        <div class="tab-content" id="dashboardTabContent">
                            <!-- Orders Tab -->
                            <div class="tab-pane fade show active" id="orders" role="tabpanel">
                                <div id="ordersList">
                                    <!-- Orders will be populated here -->
                                </div>
                            </div>
                            
                            <!-- Tracking Tab -->
                            <div class="tab-pane fade" id="tracking" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5 class="mb-3">Track Your Order</h5>
                                        <div class="mb-3">
                                            <label for="orderNumberInput" class="form-label">Order Number</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="orderNumberInput" placeholder="Enter order number (e.g., TC-2025-001)">
                                                <button class="btn btn-primary" onclick="trackOrder()">
                                                    <i class="fas fa-search me-2"></i>Track
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div id="trackingResult">
                                            <!-- Tracking result will be shown here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Profile Tab -->
                            <div class="tab-pane fade" id="profile" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5 class="mb-3">Personal Information</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Full Name</label>
                                            <input type="text" class="form-control" id="profileName" value="John Doe">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Email</label>
                                            <input type="email" class="form-control" id="profileEmail" value="john@example.com">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Phone</label>
                                            <input type="tel" class="form-control" id="profilePhone" value="+91 98765 43210">
                                        </div>
                                        <button class="btn btn-primary" onclick="saveProfile()">
                                            <i class="fas fa-save me-2"></i>Save Changes
                                        </button>
                                    </div>
                                    <div class="col-md-6">
                                        <h5 class="mb-3">Addresses</h5>
                                        <div id="addressesList">
                                            <!-- Addresses will be populated here -->
                                        </div>
                                        <button class="btn btn-outline-primary mt-3" onclick="addNewAddress()">
                                            <i class="fas fa-plus me-2"></i>Add New Address
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4 mt-5" style="background: linear-gradient(135deg, #0056b3 0%, white 100%); color: #000;">
        <p class="mb-0 fw-medium">&copy; 2025 Tezzon Charge | Powering the future of mobility âš¡</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Sample order data (in real app, this would come from backend)
        let orders = [];
        let currentUser = {
            name: 'John Doe',
            email: 'john@example.com',
            phone: '+91 98765 43210',
            addresses: [
                {
                    type: 'Home',
                    address: '123 Main Street, Apartment 4B',
                    city: 'Mumbai',
                    pincode: '400001'
                }
            ]
        };

        // Load dashboard when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadOrders();
            updateStats();
            loadProfile();
            
            // Handle hash navigation
            if (window.location.hash) {
                const hash = window.location.hash.substring(1);
                if (hash === 'tracking') {
                    document.getElementById('tracking-tab').click();
                }
            }
        });

        function loadOrders() {
            // Get orders from localStorage
            const lastOrder = JSON.parse(localStorage.getItem('lastOrder') || '{}');
            
            if (lastOrder.cart && lastOrder.cart.length > 0) {
                // Create sample orders with different statuses
                orders = [
                    {
                        id: 'TC-2025-001',
                        date: new Date().toISOString(),
                        status: 'processing',
                        items: lastOrder.cart,
                        total: lastOrder.total,
                        address: lastOrder.address || '123 Main Street, Mumbai - 400001'
                    },
                    {
                        id: 'TC-2025-000',
                        date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'delivered',
                        items: [
                            { product: 'Tezzon Charge SolarX Pro', quantity: 1, price: 89999, total: 89999 }
                        ],
                        total: 'â‚¹89,999',
                        address: '456 Oak Avenue, Delhi - 110001'
                    }
                ];
            } else {
                // Show sample orders if no real orders exist
                orders = [
                    {
                        id: 'TC-2025-000',
                        date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'delivered',
                        items: [
                            { product: 'Tezzon Charge SolarX Pro', quantity: 1, price: 89999, total: 89999 }
                        ],
                        total: 'â‚¹89,999',
                        address: '456 Oak Avenue, Delhi - 110001'
                    }
                ];
            }
            
            displayOrders();
        }

        function displayOrders() {
            const container = document.getElementById('ordersList');
            
            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="fas fa-shopping-bag fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No orders yet</h5>
                        <p class="text-muted">Start shopping to see your orders here!</p>
                        <a href="products.html" class="btn btn-primary">Browse Products</a>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = orders.map(order => `
                <div class="order-card p-3 mb-3">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <h6 class="mb-1">Order #${order.id}</h6>
                            <small class="text-muted">${new Date(order.date).toLocaleDateString('en-IN')}</small>
                        </div>
                        <div class="col-md-3">
                            <span class="order-status status-${order.status}">${getStatusText(order.status)}</span>
                        </div>
                        <div class="col-md-3">
                            <strong class="text-success">${order.total}</strong>
                        </div>
                        <div class="col-md-4 text-end">
                            <button class="btn btn-sm btn-outline-primary me-2" onclick="viewOrderDetails('${order.id}')">
                                <i class="fas fa-eye me-1"></i>View
                            </button>
                            <button class="btn btn-sm btn-outline-info me-2" onclick="trackSpecificOrder('${order.id}')">
                                <i class="fas fa-truck me-1"></i>Track
                            </button>
                            <button class="btn btn-sm btn-outline-success" onclick="downloadOrderInvoice('${order.id}')">
                                <i class="fas fa-download me-1"></i>Invoice
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pending',
                'processing': 'Processing',
                'shipped': 'Shipped',
                'delivered': 'Delivered'
            };
            return statusMap[status] || status;
        }

        function updateStats() {
            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('completedOrders').textContent = orders.filter(o => o.status === 'delivered').length;
            document.getElementById('activeOrders').textContent = orders.filter(o => o.status !== 'delivered').length;
            
            const totalSpent = orders.reduce((sum, order) => {
                const amount = order.total.replace('â‚¹', '').replace(',', '');
                return sum + parseFloat(amount || 0);
            }, 0);
            document.getElementById('totalSpent').textContent = `â‚¹${totalSpent.toLocaleString()}`;
        }

        function trackOrder() {
            const orderNumber = document.getElementById('orderNumberInput').value.trim();
            if (!orderNumber) {
                alert('Please enter an order number');
                return;
            }
            
            const order = orders.find(o => o.id === orderNumber);
            if (!order) {
                document.getElementById('trackingResult').innerHTML = `
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Order not found. Please check the order number.
                    </div>
                `;
                return;
            }
            
            displayTrackingInfo(order);
        }

        function trackSpecificOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                // Switch to tracking tab
                document.getElementById('tracking-tab').click();
                document.getElementById('orderNumberInput').value = orderId;
                displayTrackingInfo(order);
            }
        }

        function displayTrackingInfo(order) {
            const trackingSteps = getTrackingSteps(order.status);
            
            document.getElementById('trackingResult').innerHTML = `
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h6 class="mb-0"><i class="fas fa-truck me-2"></i>Tracking Order #${order.id}</h6>
                    </div>
                    <div class="card-body">
                        <div class="tracking-timeline">
                            ${trackingSteps.map((step, index) => `
                                <div class="timeline-item ${step.completed ? 'completed' : ''} ${step.current ? 'current' : ''}">
                                    <h6 class="mb-1">${step.title}</h6>
                                    <p class="text-muted mb-0">${step.description}</p>
                                    <small class="text-muted">${step.date}</small>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function getTrackingSteps(status) {
            const today = new Date();
            const steps = [
                {
                    title: 'Order Placed',
                    description: 'Your order has been confirmed and is being processed',
                    date: today.toLocaleDateString('en-IN'),
                    completed: true,
                    current: false
                },
                {
                    title: 'Order Processing',
                    description: 'We are preparing your order for shipment',
                    date: status === 'processing' ? 'In Progress' : 'Completed',
                    completed: ['processing', 'shipped', 'delivered'].includes(status),
                    current: status === 'processing'
                },
                {
                    title: 'Shipped',
                    description: 'Your order is on its way to you',
                    date: status === 'shipped' ? 'In Progress' : (['delivered'].includes(status) ? 'Completed' : 'Pending'),
                    completed: ['shipped', 'delivered'].includes(status),
                    current: status === 'shipped'
                },
                {
                    title: 'Delivered',
                    description: 'Your order has been delivered successfully',
                    date: status === 'delivered' ? 'Completed' : 'Pending',
                    completed: status === 'delivered',
                    current: status === 'delivered'
                }
            ];
            return steps;
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                // Show order details in a modal or redirect to detailed view
                alert(`Order Details for #${orderId}\n\nStatus: ${getStatusText(order.status)}\nTotal: ${order.total}\nItems: ${order.items.length}`);
            }
        }

        function loadProfile() {
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profilePhone').value = currentUser.phone;
            displayAddresses();
        }

        function displayAddresses() {
            const container = document.getElementById('addressesList');
            container.innerHTML = currentUser.addresses.map((addr, index) => `
                <div class="card mb-2">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="mb-1">${addr.type}</h6>
                                <p class="mb-1">${addr.address}</p>
                                <small class="text-muted">${addr.city} - ${addr.pincode}</small>
                            </div>
                            <button class="btn btn-sm btn-outline-danger" onclick="removeAddress(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function saveProfile() {
            currentUser.name = document.getElementById('profileName').value;
            currentUser.email = document.getElementById('profileEmail').value;
            currentUser.phone = document.getElementById('profilePhone').value;
            
            // Save to localStorage (in real app, this would go to backend)
            localStorage.setItem('userProfile', JSON.stringify(currentUser));
            
            alert('Profile updated successfully!');
        }

        function addNewAddress() {
            const newAddress = {
                type: 'New Address',
                address: 'Enter address here',
                city: 'Enter city',
                pincode: 'Enter pincode'
            };
            currentUser.addresses.push(newAddress);
            displayAddresses();
        }

        function removeAddress(index) {
            if (confirm('Are you sure you want to remove this address?')) {
                currentUser.addresses.splice(index, 1);
                displayAddresses();
            }
        }

        function editProfile() {
            // Switch to profile tab
            document.getElementById('profile-tab').click();
        }
        
        function downloadOrderInvoice(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) {
                alert('Order not found!');
                return;
            }
            
            // Create order data structure for invoice
            const orderData = {
                fullName: currentUser.name,
                email: currentUser.email,
                phone: currentUser.phone,
                address: order.address,
                cart: order.items
            };
            
            // Generate invoice HTML
            const invoiceHTML = generateInvoiceHTML(orderData, order.id, new Date(order.date).toLocaleDateString('en-IN'), order.total);
            
            // Create and download invoice
            downloadInvoiceAsHTML(invoiceHTML, order.id);
        }
        
        function generateInvoiceHTML(orderData, orderNumber, orderDate, totalAmount) {
            const today = new Date();
            const dueDate = new Date(today.getTime() + (30 * 24 * 60 * 60 * 1000)); // 30 days from now
            
            return `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Invoice - ${orderNumber}</title>
                    <style>
                        body {
                            font-family: 'Arial', sans-serif;
                            margin: 0;
                            padding: 20px;
                            background: #f8f9fa;
                        }
                        .invoice-container {
                            max-width: 800px;
                            margin: 0 auto;
                            background: white;
                            padding: 40px;
                            border-radius: 10px;
                            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
                        }
                        .header {
                            text-align: center;
                            border-bottom: 3px solid #0056b3;
                            padding-bottom: 20px;
                            margin-bottom: 30px;
                        }
                        .company-logo {
                            font-size: 2.5rem;
                            color: #0056b3;
                            font-weight: bold;
                            margin-bottom: 10px;
                        }
                        .company-info {
                            color: #6c757d;
                            font-size: 0.9rem;
                        }
                        .invoice-details {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 30px;
                        }
                        .invoice-info, .customer-info {
                            flex: 1;
                        }
                        .invoice-info h3, .customer-info h3 {
                            color: #0056b3;
                            margin-bottom: 15px;
                            font-size: 1.2rem;
                        }
                        .info-row {
                            margin-bottom: 8px;
                            font-size: 0.9rem;
                        }
                        .info-label {
                            font-weight: bold;
                            color: #495057;
                        }
                        .items-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 30px;
                        }
                        .items-table th {
                            background: #0056b3;
                            color: white;
                            padding: 15px;
                            text-align: left;
                            font-weight: 600;
                        }
                        .items-table td {
                            padding: 15px;
                            border-bottom: 1px solid #dee2e6;
                        }
                        .items-table tr:nth-child(even) {
                            background: #f8f9fa;
                        }
                        .total-section {
                            border-top: 2px solid #dee2e6;
                            padding-top: 20px;
                            margin-top: 20px;
                        }
                        .total-row {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 10px;
                            font-size: 1rem;
                        }
                        .total-row.final {
                            font-size: 1.3rem;
                            font-weight: bold;
                            color: #0056b3;
                            border-top: 2px solid #0056b3;
                            padding-top: 15px;
                            margin-top: 15px;
                        }
                        .footer {
                            margin-top: 40px;
                            text-align: center;
                            color: #6c757d;
                            font-size: 0.8rem;
                            border-top: 1px solid #dee2e6;
                            padding-top: 20px;
                        }
                        .payment-info {
                            background: #e9ecef;
                            padding: 20px;
                            border-radius: 8px;
                            margin: 20px 0;
                        }
                        .payment-info h4 {
                            color: #0056b3;
                            margin-bottom: 15px;
                        }
                        .payment-method {
                            display: flex;
                            align-items: center;
                            margin-bottom: 10px;
                        }
                        .payment-icon {
                            font-size: 1.5rem;
                            margin-right: 10px;
                            color: #28a745;
                        }
                        @media print {
                            body { background: white; }
                            .invoice-container { box-shadow: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="invoice-container">
                        <div class="header">
                            <div class="company-logo">âš¡ Tezzon Charge</div>
                            <div class="company-info">
                                Advanced EV Charging Solutions<br>
                                Powering the future of mobility
                            </div>
                        </div>
                        
                        <div class="invoice-details">
                            <div class="invoice-info">
                                <h3>Invoice Details</h3>
                                <div class="info-row">
                                    <span class="info-label">Invoice Number:</span> ${orderNumber}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Invoice Date:</span> ${orderDate}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Due Date:</span> ${dueDate.toLocaleDateString('en-IN')}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Payment Status:</span> <span style="color: #28a745; font-weight: bold;">PAID</span>
                                </div>
                            </div>
                            
                            <div class="customer-info">
                                <h3>Customer Information</h3>
                                <div class="info-row">
                                    <span class="info-label">Name:</span> ${orderData.fullName || 'Customer Name'}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Email:</span> ${orderData.email || 'customer@email.com'}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Phone:</span> ${orderData.phone || 'Phone Number'}
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Address:</span> ${orderData.address || 'Delivery Address'}
                                </div>
                            </div>
                        </div>
                        
                        <table class="items-table">
                            <thead>
                                <tr>
                                    <th>Item Description</th>
                                    <th>Quantity</th>
                                    <th>Unit Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${(orderData.cart || []).map(item => `
                                    <tr>
                                        <td>${item.product}</td>
                                        <td>${item.quantity}</td>
                                        <td>â‚¹${item.price.toLocaleString()}</td>
                                        <td>â‚¹${item.total.toLocaleString()}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        
                        <div class="total-section">
                            <div class="total-row">
                                <span>Subtotal:</span>
                                <span>â‚¹${(orderData.cart || []).reduce((sum, item) => sum + item.total, 0).toLocaleString()}</span>
                            </div>
                            <div class="total-row">
                                <span>GST (18%):</span>
                                <span>â‚¹${((orderData.cart || []).reduce((sum, item) => sum + item.total, 0) * 0.18).toLocaleString()}</span>
                            </div>
                            <div class="total-row">
                                <span>Shipping:</span>
                                <span>${(orderData.cart || []).reduce((sum, item) => sum + item.total, 0) > 50000 ? 'Free' : 'â‚¹2,000'}</span>
                            </div>
                            <div class="total-row final">
                                <span>Total Amount:</span>
                                <span>${totalAmount}</span>
                            </div>
                        </div>
                        
                        <div class="payment-info">
                            <h4>Payment Information</h4>
                            <div class="payment-method">
                                <span class="payment-icon">ðŸ’³</span>
                                <span>Payment Method: Credit/Debit Card</span>
                            </div>
                            <div class="payment-method">
                                <span class="payment-icon">âœ…</span>
                                <span>Payment Status: Completed</span>
                            </div>
                            <div class="payment-method">
                                <span class="payment-icon">ðŸ“…</span>
                                <span>Payment Date: ${orderDate}</span>
                            </div>
                        </div>
                        
                        <div class="footer">
                            <p><strong>Thank you for choosing Tezzon Charge!</strong></p>
                            <p>For any queries, please contact our customer support at support@tezzcharge.com</p>
                            <p>This is a computer-generated invoice. No signature required.</p>
                        </div>
                    </div>
                </body>
                </html>
            `;
        }
        
        function downloadInvoiceAsHTML(htmlContent, orderNumber) {
            // Create a blob with the HTML content
            const blob = new Blob([htmlContent], { type: 'text/html' });
            
            // Create a download link
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `Invoice_${orderNumber}.html`;
            
            // Trigger download
            document.body.appendChild(link);
            link.click();
            
            // Cleanup
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
            
            // Show success message
            alert(`Invoice downloaded successfully as Invoice_${orderNumber}.html!\n\nYou can open this file in any web browser and print it as a PDF.`);
        }
    </script>

</body>
</html>
